<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide d'Utilisation - Formulaire de Demande de Concession Aquacole</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Additional print styles */
        @media print {
            .no-print, .no-print * {
                display: none !important;
            }
            body {
                font-size: 12pt;
                line-height: 1.5;
                color: #000;
                background: none;
            }
            .guide-container {
                max-width: 100%;
                margin: 0;
                padding: 0;
                box-shadow: none;
            }
            a {
                text-decoration: underline;
                color: #0000EE;
            }
            .toc {
                page-break-after: always;
            }
        }
    </style>
</head>
<body>
    <div class="no-print" style="background: #f0f9ff; padding: 1rem; text-align: center; border-bottom: 1px solid #bae6fd;">
        <div class="guide-container" style="max-width: 100%; margin: 0 auto; padding: 0 1rem;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h1 style="margin: 0; font-size: 1.5rem; color: #0369a1;">
                    <i class="fas fa-book-open"></i> Guide d'Utilisation
                </h1>
                <div>
                    <button onclick="window.print()" class="print-btn" style="background: #0ea5e9; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.375rem; cursor: pointer; margin-left: 1rem;">
                        <i class="fas fa-print"></i> Imprimer
                    </button>
                    <a href="form_development_guide.pdf" download class="download-btn" style="background: #10b981; color: white; text-decoration: none; padding: 0.5rem 1rem; border-radius: 0.375rem; margin-left: 0.5rem;">
                        <i class="fas fa-file-pdf"></i> Télécharger PDF
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main content will be loaded here -->
    <div id="content">
        <!-- The markdown content will be converted and inserted here by the script -->
    </div>

    <footer class="no-print" style="background: #f0f9ff; padding: 2rem 0; margin-top: 2rem; border-top: 1px solid #bae6fd;">
        <div class="guide-container" style="text-align: center; color: #0369a1;">
            <p>© 2023 Ministère de la Pêche et des Productions Halieutiques - Tous droits réservés</p>
            <p style="font-size: 0.875rem; margin-top: 0.5rem;">
                <i class="fas fa-envelope"></i> support@aquaculture.dz | 
                <i class="fas fa-phone"></i> +213 XX XX XX XX XX
            </p>
        </div>
    </footer>

    <!-- Marked.js for markdown to HTML conversion -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        // Fetch the markdown content
        fetch('form_development_guide.md')
            .then(response => response.text())
            .then(markdown => {
                // Convert markdown to HTML
                const html = marked.parse(markdown);
                // Insert into the content div
                document.getElementById('content').innerHTML = html;
                
                // Add print button event listener
                document.querySelector('.print-btn').addEventListener('click', function() {
                    window.print();
                });
                
                // Add smooth scrolling for anchor links
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href');
                        if (targetId === '#') return;
                        
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 20,
                                behavior: 'smooth'
                            });
                            
                            // Update URL without page jump
                            history.pushState(null, null, targetId);
                        }
                    });
                });
            })
            .catch(error => {
                console.error('Error loading the guide:', error);
                document.getElementById('content').innerHTML = `
                    <div class="error-message" style="text-align: center; padding: 2rem; color: #ef4444;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <h2>Erreur de chargement du guide</h2>
                        <p>Impossible de charger le contenu du guide. Veuillez réessayer plus tard.</p>
                        <p>${error.message}</p>
                    </div>
                `;
            });
    </script>
</body>
</html>
